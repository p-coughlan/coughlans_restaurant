{% extends "bookings/base.html" %}

{% block title %}Weekly Calendar{% endblock %}

{% block content %}
<h1>Weekly Calendar</h1>
<p>Week starting on {{ week_start|date:"F j, Y" }}</p>

{% for day_data in days %}
  <h2>{{ day_data.day|date:"l, M d" }}</h2>
  
  <h3>Bookings:</h3>
  {% if day_data.bookings %}
    <ul>
      {% for booking in day_data.bookings %}
        <li>
          {{ booking.time|time:"H:i" }} - {{ booking.customer.name|default:"Anonymous" }} ({{ booking.guests }} guests)
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No bookings for this day.</p>
  {% endif %}
  
  <h3>Available Timeslots:</h3>
  <ul>
    {% for slot in day_data.timeslots %}
      <li>
         {{ slot.time }} - {% if slot.available %}Available{% else %}Booked{% endif %}
      </li>
    {% endfor %}
  </ul>
{% endfor %}

<nav>
    <a href="{% url 'weekly_calendar' %}?week_start={{ previous_week }}">Previous Week</a> |
    <a href="{% url 'weekly_calendar' %}?week_start={{ next_week }}">Next Week</a>
</nav>
{% endblock %}
